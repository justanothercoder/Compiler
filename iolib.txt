extern __fopen(const string& filename, int mode, int flags) : int;
extern __fclose(int fd) : void;
extern __fread(int fd, string& str, int len) : int;
extern __fwrite(int fd, const string& str, int len) : int;

struct InputStream
{
	int fd;

	def InputStream() {
		fd = 0;
	}

	def open(const string& filename) {
		fd = __fopen(filename, 438, 0);
	}

	def read(string& s, int len)  {
		__fread(fd, s, len)
	}

	def close() {
		__fclose(fd);
	}
}

struct OutputStream
{
	int fd;

	def OutputStream() {
		fd = 1;
	}

	def open(const string& filename) {
		fd = __fopen(filename, 438, 1);
	}

	def write(const string& text) {
		__fwrite(fd, text, text.length())
	}

	def close() {
		__fclose(fd);
	}
}



struct BufferedInputStream
{
	InputStream istream;
	string buffer;

	def BufferedInputStream() {
		istream.fd = 0
	}

	def open(const string& filename) {
		istream.open(filename)
	}

	def readLine() : string {
		__fread(istream.fd, buffer, 256)
		
		return buffer
	}

	def close() {
		istream.close()
	}
}

